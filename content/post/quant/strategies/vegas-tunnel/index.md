---
title: "Vegas隧道交易法的学习笔记"
date: 2022-05-04T23:12:24+08:00
description: "基于Vegas隧道交易法的学习总结和实操记录"
categories:
  - 宽客
tags:
  - 量化策略
  - vegas隧道
  - 趋势
---

> 笔者按：这世上并不存在能在瞬息万变的市场中，维持绝对胜率和盈亏比的策略，Vegas本人公布的隧道交易法也是如此，需要对优秀的策略进行实践、提炼后成为自己的东西，才能找到获胜的秘诀。

## 策略概述

### 策略介绍

Vegas隧道交易法是Vegas本人在上世纪公布的自己一整套交易理念和方法，其核心理念是做`顺势突破`，任何情况下不要逆行情操作。这也为后人总结的`123交易法则`奠定了基础。原文可参考[<http://fxw123.net/m/view.php?aid=1510>].

我们可以看到，后面讲的交易策略设计的到均线都涉及到斐波那契数列，即12、144、169、576、676，与斐波那契数有着密切关系，这也是Vegas惊叹和赞美的地方。当然现在的认知只把这个作为大自然美妙的巧合，希望后面能探索到更多理性严谨的证明。

## 基本思路

Vegas隧道交易法主要用到5条EMA（ExponentialMovingAverage）均线：

### 中短期通道均线：

`EMA144`和`EMA169`形成的两条线构成中短期的通道，**是短期趋势、中期趋势的分水岭**。从形态上看，中短期通道其实也体现了整个中短期行情的方向+阻力。

> 我们所有的操作，必须在过滤线完成对中短期通道突破后再进行操作。

### 过滤线：

`EMA12`构成过滤线，过滤线存在的意义是需要过滤价格“假突破”的情况，EMA12能够很好的减少这些噪声。

> 通常过滤线突破中短期通道（EMA144+EMA16）会存在一波行情，当然该结论仅供参考。

### 中长期通道均线：

`EMA576`和`EMA676`构成中长期的通道均线，也即4倍周期的中短期通道均线，**它起到了提示趋势方向的作用**，Vegas认为，我们任何时候，都需要顺势操作，也就是顺着576、676的通道趋势操作。

但是在实际分析也发现，Vegas隧道交易法不太适合震荡行情，也就是没有形成空头、多头趋势的状态，不可否认，市场大部分时间都处于震荡行情，后续实盘分析需要考虑如何过滤震荡行情的信号。

> 在观看多个UP主视频后发现，576、676这个提示中长期趋势方向的周期不一定，也有人用233、377的周期，后续回测时进一步分析，注意辩证看待别人共享的东西。

## 实操分析

### V1.0 上穿做多，下穿止损

​	根据隧道交易法的原话，

**等待市场进人“隧道”区域。当它突破隧道上轨时，你做多；**

**当它突破隧道下轨时，你做空。**

**平仓和反转位置放置在隧道的另外一边**

我们可以初步给出1.0版本的开仓和平仓策略，我们首先只考虑做多头头寸，简化概念的理解。那么可以得到以下操作原则：

* 突破中短期通道（144、169）上轨时，做多，止损点为通道下轨
* 止盈377点

参数配置：

| 币对     | 起始资金 | 单次买入 | Timeframe | Start_time | End_time | 止盈 |
| -------- | -------- | -------- | --------- | ---------- | -------- | ---- |
| BTC-USDT | 10000U   | 0.2BTC   | 1H        | 2022.3.1   | 2022.5.9 | +377 |

主要策略实现：

```python
    def next(self):
        if self.position.size == 0:
            # 取上轨作为买入触发点
            if self.ema144 > self.ema169 and self._12_to_144 > 0:
                self.buy()
            if self.ema144 < self.ema169 and self._12_to_169 > 0:
                self.buy()

        if self.position.size > 0:
            # 止盈
            if self.data.close >= self.position.price + self.p.stoplimit:
                self.sell()
            # 止损
            if self.ema144 > self.ema169 and self._12_to_169 < 0:
                self.sell()
            if self.ema144 < self.ema169 and self._12_to_144 < 0:
                self.sell()
```

回测结果：

![Figure_0](/Users/zhongwenwang/Documents/YeLuoBlog/content/post/quant/strategies/vegas-tunnel/Figure_0.png)

> 自2022年4月以来明显大熊市，回测结果能盈利就不错了。
